# 國小生作文練習APP（繁體中文）
基於Python + PyQt6開發的「邊寫邊引導」作文練習工具，支援作文/造句/講話轉寫三大模式，整合gTTS語音朗讀功能，適合3-6年級國小生使用。

## 🌟 核心功能
1. **作文模式**：選擇題目逐句書寫，即時推送3個優化建議，完成後生成評分報告；
2. **造句模式**：輸入關鍵詞+選擇句式（比喻句/擬人句等），引導擴寫並驗證是否符合要求；
3. **講話轉寫模式**：語音輸入轉文字，自動優化為書面語，支援語音聆聽建議；
4. **語音功能**：建議句可朗讀（繁體中文語音），幫助學生理解語句流暢度；
5. **資料庫儲存**：自動儲存練習記錄，包含輸入文本、採納建議、分數等。

## 📋 安裝步驟
### 1. 環境要求
- Python 3.8+（建議3.9/3.10，相容性最佳）
- 支援系統：Windows 10+/Mac OS 12+/Linux（需安裝對應依賴）

### 2. 安裝依賴套件
打開終端/命令提示字元，進入APP資料夾，執行以下指令：
```bash
pip install -r requirements.txt
```

#### 注意事項（若安裝失敗）：
- **pyaudio安裝失敗**：
  - Windows：先下載對應Python版本的pyaudiowhl檔（網址：https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyaudio），再執行 `pip install 下載的檔名.whl`；
  - Mac：先安裝PortAudio：`brew install portaudio`，再執行 `pip install pyaudio`；
  - Linux：先安裝PortAudio：`sudo apt-get install portaudio19-dev`，再執行 `pip install pyaudio`。
- **playsound相容問題**：若播放語音失敗，可嘗試升級/降級版本：`pip install playsound==1.3.0`。

### 3. 啟動APP
安裝完成後，執行以下指令（或直接雙擊main.py）：
```bash
python main.py
```
首次啟動會自動初始化資料庫（建立規則表、資源表），稍候即可進入介面。

## 📖 使用教學
### 模式一：作文模式
1. 選擇年級（3-6年級）；
2. 從下拉選單選擇作文題目（如「我的寵物」）；
3. 點擊「開始寫作」，逐句輸入作文（每句結束按回車或句號）；
4. 系統自動推送3個優化建議，點擊建議可直接採納，點「🔊 聆聽建議」可朗讀；
5. 完成後點擊「🏆 生成評分」，查看分項得分和改進建議；
6. 點擊「💾 儲存記錄」，將練習儲存到本機資料庫。

### 模式二：造句模式
1. 輸入關鍵詞（如「開心」「秋天」）；
2. 選擇句式（通用造句/比喻句/擬人句/含細節句）；
3. 點擊「開始造句」，輸入你的句子（句末加標點）；
4. 系統推送優化建議，點擊採納或自行修改；
5. 點擊「✅ 驗證造句」，檢查是否符合關鍵詞和句式要求；
6. 點擊「💾 儲存記錄」完成練習。

### 模式三：講話轉寫模式
1. 點擊「🎤 開始說話」，清晰講述內容（如「上週末我去動物園玩，看到很多可愛的動物」）；
2. 語音結束後，系統自動轉寫為文字，顯示在編輯框中；
3. 點擊「📝 生成書面語優化建議」，獲取3個書面語改寫建議；
4. 點擊建議可採納，點「🔊 聆聽建議」朗讀；
5. 點擊「💾 儲存記錄」，儲存轉寫和優化結果。

## ⚠️ 常見問題
1. **APP打不開**：檢查Python版本是否符合要求，依賴套件是否安裝完整；
2. **語音轉寫無回應**：檢查麥克風是否正常工作，是否授予APP麥克風許可權；
3. **語音播放失敗**：檢查喇叭是否正常，嘗試更換playsound版本；
4. **建議不顯示**：確保句子結束時輸入了回車或句號，句子長度不少於2個字；
5. **資料庫儲存失敗**：檢查APP資料夾是否有寫入許可權，避免中文路徑（如「我的文件/作文APP」改為「Documents/writing_app」）。

## 🛠️ 自定義擴充
### 1. 新增寫作規則
打開 `db_init.py`，在 `sample_rules` 清單中新增規則，格式如下：
```python
("規則類型", "規則描述", "觸發條件", "建議模板", 權重, "適用年級"),
```
新增後重新執行 `db_init.py`，即可更新資料庫規則。

### 2. 新增詞彙資源
打開 `db_init.py`，在 `sample_resources` 清單中新增資源，格式如下：
```python
("資源類型", "資源內容（用頓號分隔）", "適用年級"),
```
支援資源類型：比喻詞、擬人詞、銜接詞、形容詞、謂語、感受詞、時間詞、地點詞、喻體、道理詞。

## 📌 備註
- 本APP為本機運行，所有數據儲存在本地 `student_writing.db` 檔案，保護學生隱私，無需連網；
- 評分系統基於10本寫作規則設計，可根據實際需求調整 `db_init.py` 中的規則和權重；
- 若需簡化介面或關閉語音功能，可修改 `main.py` 中的對應程式碼（如註解TTS相關程式）。